<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Карта Екатеринбурга</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    
    <script src="https://unpkg.com/maplibre-gl@3.x/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@3.x/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/pmtiles@2.11.0/dist/index.js"></script>

    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    </style>
</head>
<body>

<div id="map"></div>

<script>
    // Настройка протокола PMTiles
    const protocol = new pmtiles.Protocol();
    maplibregl.addProtocol("pmtiles", protocol.add);

    // Укажите путь к вашему файлу в репозитории
    const TILE_URL = "ekb.pmtiles"; 

    const map = new maplibregl.Map({
        container: 'map',
        style: {
            version: 8,
            sources: {
                "ekb_source": {
                    type: "vector",
                    url: `pmtiles://${TILE_URL}`,
                    attribution: '© <a href="https://openstreetmap.org">OpenStreetMap</a>'
                }
            },
            layers: [
                // Базовый фон
                {
                    "id": "background",
                    "type": "background",
                    "paint": { "background-color": "#f0f0f0" }
                },
                // Пример отображения зданий (слои зависят от структуры вашего pmtiles)
                {
                    "id": "buildings",
                    "source": "ekb_source",
                    "source-layer": "buildings", 
                    "type": "fill",
                    "paint": { "fill-color": "#d6d6d6", "fill-outline-color": "#aaaaaa" }
                },
                // Дороги
                {
                    "id": "roads",
                    "source": "ekb_source",
                    "source-layer": "roads",
                    "type": "line",
                    "paint": { "line-color": "#ffffff", "line-width": 1.5 }
                }
            ]
        },
        center: [60.6057, 56.8389], // Координаты Екб (Lon, Lat)
        zoom: 12
    });

    map.addControl(new maplibregl.NavigationControl());
</script>

</body>
</html>